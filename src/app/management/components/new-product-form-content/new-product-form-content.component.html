<h2 mat-dialog-title>
  <mat-icon class="title-icon">add_circle_outline</mat-icon> 
  Registrar Nuevo Producto
</h2>

<mat-dialog-content class="dialog-body">
  <form class="product-form" #formControl="ngForm">
    
    <div class="form-section">
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Nombre del Producto</mat-label>
        <input matInput [(ngModel)]="productForm.name" name="name" required placeholder="Ej. Papa Amarilla">
        <mat-icon matSuffix>local_florist</mat-icon>
        <mat-error>El nombre es obligatorio</mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Selecciona Imagen</mat-label>
        <mat-select [(ngModel)]="productForm.imageUrl" name="imageUrl" required>
          <mat-option *ngFor="let img of availableImages" [value]="img.url">
            <div class="select-option-content">
               <img [src]="img.url" class="option-img"> 
               {{ img.name }}
            </div>
          </mat-option>
        </mat-select>
        <mat-icon matSuffix>image</mat-icon>
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Descripción</mat-label>
        <textarea matInput [(ngModel)]="productForm.description" name="description" rows="2"></textarea>
      </mat-form-field>
    </div>

    <h3 class="section-subtitle">Ficha Técnica</h3>
    <div class="grid-inputs">
      
      <mat-form-field appearance="outline">
        <mat-label>Clima</mat-label>
        <input matInput [(ngModel)]="productForm.recommendedGrowingClimate" name="weather">
        <mat-icon matSuffix>wb_sunny</mat-icon>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Tipo de Suelo</mat-label>
        <input matInput [(ngModel)]="productForm.recommendedSoilType" name="groundType">
        <mat-icon matSuffix>landscape</mat-icon>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Temporada</mat-label>
        <input matInput [(ngModel)]="productForm.recommendedGrowingSeason" name="season">
        <mat-icon matSuffix>calendar_today</mat-icon>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Distancia (m)</mat-label>
        <input matInput type="number" min="0" [(ngModel)]="productForm.recommendedCultivationDistance" name="distance">
        <mat-icon matSuffix>space_bar</mat-icon>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Profundidad (m)</mat-label>
        <input matInput type="number" min="0" [(ngModel)]="productForm.recommendedCultivationDepth" name="depth">
        <mat-icon matSuffix>vertical_align_bottom</mat-icon>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Precio Unitario (S/)</mat-label>
        <input matInput type="number" min="0" [(ngModel)]="productForm.unitPrice" name="unitPrice" required>
        <span matPrefix>S/&nbsp;</span>
      </mat-form-field>

    </div>
  </form>
</mat-dialog-content>

<mat-dialog-actions align="end">
  <button mat-stroked-button color="warn" (click)="onCancel()">Cancelar</button>
  <button mat-flat-button color="primary" (click)="onSubmit()" [disabled]="!formControl.valid">Guardar Producto</button>
</mat-dialog-actions>